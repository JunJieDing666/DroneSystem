<%@ page contentType="text/html; charset=gbk" language="java" import="java.sql.*" errorPage="" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=gbk" />
<title>机构名称管理</title>
	<link rel="stylesheet" type="text/css" href="../Inc/Style/themes/default/easyui.css" />
    <link rel="stylesheet" type="text/css" href="../Inc/Style/themes/icon.css" />
	<link rel="stylesheet" type="text/css" href="../Inc/Style/themes/icon2.css" />
    <link rel="stylesheet" type="text/css" href="../Inc/Style/Style.css" />
	<script type="text/javascript" src="../Inc/JScript/jquery-1.6.min.js"></script>
	<script type="text/javascript" src="../Inc/JScript/jquery.easyui.min.js"></script>
	<script type="text/javascript"  src="../Inc/JScript/locale/easyui-lang-zh_CN.js" charset="utf-8"></script>
	<script>
		$(function(){			
			$('#table2').datagrid({
				title:'高速公路管理',
				width:900,
				height:500,
				singleSelect:false, 
                nowrap: false,
                striped: true,
				url:'',
				//sortName: 'Id',
				remoteSort: false,
				singleSelect:true, 
				idField:'Id',
				frozenColumns:[[
	                {field:'ck',checkbox:true}
				]],
				columns:[[
					{field:'Name',title:'名称',width:80,align:'center'},
					{field:'Brief',title:'拼音简码',width:60,align:'center'},
					{field:'Code',title:'编号',width:100,align:'center'},
					{field:'StartPoint',title:'起点',width:80,align:'center'},
					{field:'EndPoint',title:'终点',width:80,align:'center'},
					{field:'Length',title:'长度',width:80,align:'center'},
					{field:'Width',title:'宽度',width:80,align:'center'},
					{field:'LaneNum',title:'车道数',width:80,align:'center'},
					{field:'DesignSpeed',title:'设计速度',width:80,align:'center'},
					{field:'MaxLonGrade',title:'最大纵坡',width:80,align:'center'},
					{field:'Rank',title:'等级',width:80,align:'center'},
					{field:'Status',title:'状态',width:80,align:'center'}
				]],
				pagination:false,
				rownumbers:true,
				toolbar:[{
						text:'新增',
						iconCls:'icon-add',
						handler:function(){
							$('#edit').window('open');
							$('#form1').show();
							$('#form1').form('clear');
							var clickname="新增";
							$('#edit').panel({title:clickname});
						}
					},'-',{
						text:'修改',
						iconCls:'icon-edit',
						handler:function(){
							var select = $('#table2').datagrid('getSelected');
							if(select){
								$('#edit').window('open');
								$('#form1').show();
								var clickname="修改";
								$('#edit').panel({title:clickname});
								$('#form1').form('load',select);
								$('#form1').form('validate');
						}else{
							$.messager.alert('提示','请选择一行数据','warning');
							}
						}
				},'-',{
						text:'注销',
						iconCls:'icon-remove',
						handler:function(){
							var select = $('#table2').datagrid('getSelected');
							if(select){
								$.messager.confirm('提示','确认注销吗？',function(r){
								if(r){
									$.ajax({
									type:'POST',
									url:'/jlyw/AddressServlet.do?method=5',
									data:"id="+select.Id,
									dataType:"html",
									success:function(data){
										$('#table2').datagrid('reload');
									}
								});
								}
							});	
							}
							else
							{
								$.messager.alert('提示','请选择一行数据','warning');
							}
						}
				}]
			});
			
		});
		
		function Submit(){
			$('#form1').form('submit',{
				url: '/jlyw/AddressServlet.do?method=4',
				onSubmit:function(){ return $('#form1').form('validate');},
		   		success:function(data){
		   			var result = eval("("+data+")");
		   			$.messager.alert('提示',result.msg,'info');
		   			if(result.IsOK)
		   				closed();
					$('#table2').datagrid('reload');
		   		 }
			});
		}
		
		function closed(){
			$('#edit').dialog('close');
		}
			
		</script>

</head>

<body>
<DIV class="JlywMainLayoutDiv">
	<DIV class="JlywCenterLayoutDIV">
	<div style="width:900px"  region="center">
		
		<table id="table2" style="height:500px; width:900px"></table>
		
		<div id="edit" class="easyui-window" title="修改" style="padding: 10px;width: 540px;height: 300px;"
		iconCls="icon-edit" closed="true" maximizable="false" minimizable="false" collapsible="false" modal="true">
			<form id="form1" method="post">
				<div>
					<table id="table3" iconCls="icon-edit" >
					<input id="Id" name="Id" type="hidden"/>
						<tr>
							<td align="right">公路名称：</td>
							<td align="left"><input id="Name" name="Name" class="easyui-validatebox" required="true"/></td>
							<td align="right">拼音简码：</td>
							<td align="left"><input id="Brief" name="Brief" class="easyui-validatebox" required="true"/></td>
						</tr>
						<tr>
							<td align="right">编&nbsp;&nbsp;&nbsp;&nbsp;号：</td>
							<td align="left"><input id="Code" name="Code" class="easyui-validatebox" required="true"/></td>
                            <td align="right">车道数：</td>
							<td align="left"><input id="LaneNum" name="LaneNum" class="easyui-validatebox"/></td>
						</tr>
						<tr>
							<td align="right">起&nbsp;&nbsp;&nbsp;&nbsp;点：</td>
							<td align="left"><input id="StartPoint" name="StartPoint" class="easyui-combobox" required="true"/></td>
							<td align="right">终&nbsp;&nbsp;&nbsp;&nbsp;点：</td>
							<td align="left"><input id="EndPoint" name="EndPoint" class="easyui-combobox"/></td>
                            </tr>
                        <tr>
                            <td align="right">长&nbsp;&nbsp;&nbsp;&nbsp;度：</td>
							<td align="left"><input id="Length" name="Length" class="easyui-validate"/></td>
                            <td align="right">宽&nbsp;&nbsp;&nbsp;&nbsp;度：</td>
							<td align="left"><input id="Width" name="Width" class="easyui-validate"/></td>
						</tr>
                        <tr>
                            <td align="right">设计速度：</td>
							<td align="left"><input id="DesignSpeed" name="DesignSpeed" class="easyui-validate"/></td>
                            <td align="right">最大纵坡：</td>
							<td align="left"><input id="MaxLonGrade" name="MaxLonGrade" class="easyui-validate"/></td>
						</tr>
                        <tr>
                        	<td align="right">等&nbsp;&nbsp;&nbsp;&nbsp;级：</td>
							<td align="left"><input id="WebSite" name="WebSite" class="easyui-validate"/></td>
                            <td align="right">状&nbsp;&nbsp;&nbsp;&nbsp;态：</td>
                            <td>
								<select id="Status" name="Status" class="easyui-combobox" style="width:152px" required="true" panelHeight="auto"  editable="false">
									<option value="0">正常</option>
									<option value="1">过时</option>
								</select>
							</td>
                        </tr>
                       
						<tr height="50px">	
							<td></td>
							<td><a class="easyui-linkbutton" iconCls="icon-ok" href="javascript:void(0)" onclick="Submit()">提交</a></td>
							<td></td>
							<td><a class="easyui-linkbutton" iconCls="icon-cancel" href="javascript:void(0)" onclick="closed()">取消</a></td>
						</tr>
					</table>
				</div>
			</form>
		</div>
	</div>
</DIV>
</DIV>
</body>
</html>
